apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-to-kind-network
  namespace: {{ .Release.Namespace }}
  annotations:
    gardener.cloud/description: Allows egress from pods labeled with 'networking.gardener.cloud/to-kind-network=allowed'
      to all containers in the kind docker network. This can be used for example for allowing egress to the garden
      cluster from the second kind cluster.
spec:
  podSelector:
    matchLabels:
      networking.gardener.cloud/to-kind-network: allowed
  egress:
  - to:
    # kind network CIDR
    - ipBlock:
        cidr: 172.18.0.0/24
    - ipBlock:
        cidr: fd00:10::/64
    # range for "load balancer" IPs (manually added to loopback interface on host)
    - ipBlock:
        cidr: 172.18.255.0/24
    - ipBlock:
        cidr: ::/120
  policyTypes:
  - Egress
