apiVersion: crd.projectcalico.org/v1
kind: IPPool
metadata:
  name: gardenadm-unmanaged-infra
spec:
  cidr: 10.0.0.0/16
  ipipMode: Always
  natOutgoing: true
  # Without this, calico defaults nodeSelector to "all()" and can randomly pick this pool for
  # IPAM for pods even if the pod does not explicitly request an IP from this pool via the
  # cni.projectcalico.org/IPv{4,6}Pools annotation.
  # See https://github.com/projectcalico/calico/issues/7299#issuecomment-1446834103
  nodeSelector: "!all()"
